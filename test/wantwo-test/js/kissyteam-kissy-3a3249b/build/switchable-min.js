/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Mar 23 12:19
*/
KISSY.add("switchable/accordion/aria",function(i,e,s,r,p){function w(h){var j;i.each(this.triggers,function(A){if(A==h||e.contains(A,h))j=A});return j}function u(h){var j;i.each(this.panels,function(A){if(A==h||e.contains(A,h))j=A});return j}function g(h){var j=w.call(this,h);if(!j){h=u.call(this,h);j=this.triggers[i.indexOf(h,this.panels)]}return j}function q(h){switch(h.keyCode){case t:case y:h.ctrlKey&&!h.altKey&&!h.shiftKey&&h.halt();break;case m:h.ctrlKey&&!h.altKey&&h.halt()}}function a(h){var j=
h.target,A=this.triggers,D=!h.ctrlKey&&!h.shiftKey&&!h.altKey,F=h.ctrlKey&&!h.shiftKey&&!h.altKey;switch(h.keyCode){case z:case v:if((j=w.call(this,j))&&D){this.switchTo(i.indexOf(j,this.triggers));h.halt()}break;case x:case l:if(j=w.call(this,j)){c.call(this,j);h.halt()}break;case B:case k:if(j=w.call(this,j)){d.call(this,j);h.halt()}break;case y:if(F){h.halt();j=g.call(this,j);d.call(this,j)}break;case t:if(F){h.halt();j=g.call(this,j);c.call(this,j)}break;case o:if(D){g.call(this,j);b.call(this,
0,true);h.halt()}break;case n:if(D){g.call(this,j);b.call(this,A.length-1,true);h.halt()}break;case m:if(h.ctrlKey&&!h.altKey){h.halt();j=g.call(this,j);h.shiftKey?c.call(this,j):d.call(this,j)}}}function b(h,j){var A=this.triggers,D=A[h];i.each(A,function(F){if(F!==D){E(F,"-1");e.removeClass(F,"ks-switchable-select");F.setAttribute("aria-selected","false")}});j&&D.focus();E(D,"0");e.addClass(D,"ks-switchable-select");D.setAttribute("aria-selected","true")}function c(h){var j=this.triggers;h=i.indexOf(h,
j);b.call(this,h==0?j.length-1:h-1,true)}function d(h){var j=this.triggers;h=i.indexOf(h,j);b.call(this,h==j.length-1?0:h+1,true)}function f(h){var j=!!(h.originalEvent.target||h.originalEvent.srcElement);h=h.currentIndex;var A=this.panels,D=this.triggers,F=D[h],G=A[h];if(!this.config.multiple){i.each(A,function(C){C!==G&&C.setAttribute("aria-hidden","true")});i.each(D,function(C){C!==F&&C.setAttribute("aria-hidden","true")})}A=G.getAttribute("aria-hidden");G.setAttribute("aria-hidden",A=="false"?
"true":"false");F.setAttribute("aria-expanded",A=="false"?"false":"true");b.call(this,h,j)}var t=33,y=34,n=35,o=36,x=37,l=38,B=39,k=40,m=9,v=32,z=13;i.mix(p.Config,{aria:true});p.Plugins.push({name:"aria",init:function(h){if(h.config.aria){var j=h.container,A=h.activeIndex;e.attr(j,"aria-multiselectable",h.config.multiple?"true":"false");h.nav&&e.attr(h.nav,"role","tablist");var D=h.triggers,F=h.panels,G=0;i.each(F,function(C){if(!C.id)C.id=i.guid("ks-accordion-tab-panel")});i.each(D,function(C){if(!C.id)C.id=
i.guid("ks-accordion-tab")});i.each(D,function(C){C.setAttribute("role","tab");C.setAttribute("aria-expanded",A==G?"true":"false");C.setAttribute("aria-selected",A==G?"true":"false");C.setAttribute("aria-controls",F[G].id);E(C,A==G?"0":"-1");G++});G=0;i.each(F,function(C){var H=D[G];C.setAttribute("role","tabpanel");C.setAttribute("aria-hidden",A==G?"false":"true");C.setAttribute("aria-labelledby",H.id);G++});h.on("switch",f,h);s.on(j,"keydown",a,h);s.on(j,"keypress",q,h)}}});var E=r.setTabIndex},
{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/accordion/base",function(i,e,s){function r(p,w){if(!(this instanceof r))return new r(p,w);r.superclass.constructor.apply(this,arguments)}i.extend(r,s,{_switchTrigger:function(p,w){var u=this.config;u.multiple?e.toggleClass(w,u.activeTriggerCls):r.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(p){return this.config.multiple||r.superclass._triggerIsValid.call(this,p)},_switchView:function(p,w,u,g,q,a){var b=w[0];if(this.config.multiple){e.toggle(b);this._fireOnSwitch(u,
q);a&&a.call(this)}else r.superclass._switchView.apply(this,arguments)}});r.Plugins=[];r.Config={markupType:1,triggerType:"click",multiple:false};return r},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(i,e,s,r){function p(){this.stop&&this.stop()}function w(){this.start&&this.start()}r.Plugins.push({name:"aria",init:function(g){if(g.config.aria){var q=g.container;s.on(q,"focusin",p,g);s.on(q,"focusout",w,g)}}});var u=["a","input","button","object"];return{setTabIndex:function(g,q){g.tabIndex=q;i.each(e.query("*",g),function(a){var b=a.nodeName.toLowerCase();if(i.inArray(b,u)){e.hasAttr(a,"oriTabIndex")||e.attr(a,"oriTabIndex",a.tabIndex);a.tabIndex=q!=-1?e.attr(a,
"oriTabIndex"):q}})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(i,e,s,r,p){var w=i.Env.host,u=function(g){var q=e.scrollTop(),a=e.viewportHeight(),b=e.offset(g);g=e.height(g);return b.top>q&&b.top+g<q+a};i.mix(r.Config,{pauseOnScroll:false,autoplay:false,interval:5,pauseOnHover:true});r.Plugins.push({name:"autoplay",init:function(g){function q(){c=i.later(function(){g.paused||g.switchTo(g.activeIndex<g.length-1?g.activeIndex+1:0,"forward")},b,true)}var a=g.config,b=a.interval*1E3,c;if(a.autoplay){if(a.pauseOnScroll){g.__scrollDetect=
i.buffer(function(){g[u(g.container)?"start":"stop"]()},200);s.on(w,"scroll",g.__scrollDetect)}q();g.stop=function(){if(c){c.cancel();c=p}g.paused=true};g.start=function(){if(c){c.cancel();c=p}g.paused=false;q()};if(a.pauseOnHover){s.on(g.container,"mouseenter",g.stop,g);s.on(g.container,"mouseleave",g.start,g)}}},destroy:function(g){g.__scrollDetect&&s.remove(w,"scroll",g.__scrollDetect)}});return r},{requires:["dom","event","./base"]});
KISSY.add("switchable/autorender",function(i,e,s,r){r.autoRender=function(p,w){p="."+(p||"KS_Widget");i.each(e.query(p,w),function(u){var g=u.getAttribute("data-widget-type"),q;if(g&&"Switchable Tabs Slide Carousel Accordion".indexOf(g)>-1)try{if(q=u.getAttribute("data-widget-config"))q=q.replace(/'/g,'"');new (g=="Switchable"?r:r[g])(u,s.parse(q))}catch(a){}})}},{requires:["dom","json","switchable/base"]});
KISSY.add("switchable/base",function(i,e,s,r){function p(a,b){b=b||{};if(!("markupType"in b))if(b.panelCls)b.markupType=1;else if(b.panels)b.markupType=2;for(var c=this.constructor;c;){b=i.merge(c.Config,b);c=c.superclass?c.superclass.constructor:null}this.container=e.get(a);this.config=b;this.activeIndex=this.completedIndex=b.activeIndex;if(!(this.activeIndex>-1))if(typeof b.switchTo!="number")this.completedIndex=this.activeIndex=0;this._init();this._initPlugins();this.fire(g);this.activeIndex>-1||
typeof b.switchTo=="number"&&this.switchTo(b.switchTo)}function w(a){var b={};b.type=a.originalEvent.type;b.target=a.originalEvent.target||a.originalEvent.srcElement;return{originalEvent:b}}var u=i.makeArray;s=s.Target;var g="init",q="removed";p.getDomEvent=w;p.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",
steps:1,viewSize:[]};p.Plugins=[];i.augment(p,s,{_initPlugins:function(){for(var a=this,b=a.constructor;b;){i.each(b.Plugins,function(c){c.init&&c.init(a)});b=b.superclass?b.superclass.constructor:null}},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,b=this.config,c,d,f=[],t=[];switch(b.markupType){case 0:if(c=e.get("."+b.navCls,a))f=e.children(c);d=e.get("."+b.contentCls,a);t=e.children(d);
break;case 1:f=e.query("."+b.triggerCls,a);t=e.query("."+b.panelCls,a);break;case 2:f=b.triggers;t=b.panels}a=t.length;this.length=Math.ceil(a/b.steps);if(b.hasTriggers&&a>0&&f.length===0)f=this._generateTriggersMarkup(this.length);this.triggers=u(f);this.panels=u(t);this.content=d||t[0].parentNode;this.nav=c||b.hasTriggers&&f[0].parentNode},_generateTriggersMarkup:function(a){var b=this.config,c=e.create("<ul>"),d,f;c.className=b.navCls;for(f=0;f<a;f++){d=e.create("<li>");if(f===this.activeIndex)d.className=
b.activeTriggerCls;d.innerHTML=f+1;c.appendChild(d)}this.container.appendChild(c);return e.children(c)},_bindTriggers:function(){var a=this,b=a.config,c=i.one(a.nav);i.each(a.triggers,function(d){a._initTrigger(d)});c.delegate("click",".ks-switchable-trigger-internal",function(d){var f=a._getTriggerIndex(d.currentTarget);a._onFocusTrigger(f,d)});b.triggerType==="mouse"&&c.delegate("mouseenter",".ks-switchable-trigger-internal",function(d){var f=a._getTriggerIndex(d.currentTarget);a._onMouseEnterTrigger(f,
d)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},_initTrigger:function(a){e.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;i.each(a.panels,function(b){a._initPanel(b)})},_initPanel:function(a){e.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,b){if(this._triggerIsValid(a)){this._cancelSwitchTimer();this.switchTo(a,r,w(b))}},_onMouseEnterTrigger:function(a,b){var c=this;if(c._triggerIsValid(a)){var d=
w(b);c.switchTimer=i.later(function(){c.switchTo(a,r,d)},c.config.delay*1E3)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=r}},_getTriggerIndex:function(a){return i.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var b=this.config;if(a===r)a=this.panels.length;return Math.ceil(a/
b.steps)},_afterAdd:function(a,b){this._resetLength();var c=this._getLength(a+1)-1;if(this.config.steps==1){if(this.activeIndex>=c)this.activeIndex+=1;if(this.completedIndex>=c)this.completedIndex+=1}var d=this.activeIndex;this.completedIndex=this.activeIndex=-1;this.switchTo(d);b&&this.switchTo(c)},add:function(a){var b=this.nav,c=this.content,d=a.trigger,f=a.panel,t=a.activated,y=this.panels.length;a=a.index!=null?a.index:y;var n=this.triggers,o=this.panels,x=this.length,l=null;l=null;a=Math.max(0,
Math.min(a,y));y=o[a];o.splice(a,0,f);y?e.insertBefore(f,y):e.append(f,c);if(this.config.steps==1){(l=n[a])?e.insertBefore(d,l):e.append(d,b);n.splice(a,0,d)}else{l=this._getLength();if(l!=x){e.append(d,b);n.push(d)}}this._initPanel(f);this._initTrigger(d);this.fire("added",{index:a,trigger:d,panel:f});this._afterAdd(a,t)},remove:function(a){function b(){if(x){e.remove(x);t.splice(a,1)}if(o){e.remove(o);d==1?c.triggers.splice(a,1):c.triggers.splice(f-1,1)}c._resetLength();c.fire(q,{index:a,trigger:o,
panel:x})}var c=this,d=c.config.steps,f=c.length,t=c.panels,y=c._getLength(t.length-1),n=c.triggers,o=null,x=null;a=i.isNumber(a)?Math.max(0,Math.min(a,t.length-1)):i.indexOf(a,t);o=d==1?n[a]:y!==f?n[f-1]:null;x=t[a];if(c.fire("beforeRemove",{index:a,panel:x,trigger:o})!==false)if(y==0)b();else{n=c.activeIndex;if(d!=1)if(n>=y)c.switchTo(y-1,r,r,b);else{b();c.activeIndex=-1;c.completedIndex=-1;c.switchTo(n)}else c.switchTo(n>0?n-1:n+1,r,r,b)}},switchTo:function(a,b,c,d){var f=this,t=f.config,y=f.triggers,
n=f.panels,o=f.activeIndex,x=t.steps,l=o*x,B=a*x;if(!f._triggerIsValid(a))return f;if(f.fire("beforeSwitch",{toIndex:a})===false)return f;if(t.hasTriggers)f._switchTrigger(o>-1?y[o]:null,y[a]);if(b===r)b=a>o?"forward":"backward";f.activeIndex=a;f._switchView(o>-1?n.slice(l,l+x):null,n.slice(B,B+x),a,b,c,function(){d&&d.call(f,a);f.completedIndex=f.activeIndex=a});return f},_switchTrigger:function(a,b){var c=this.config.activeTriggerCls;a&&e.removeClass(a,c);e.addClass(b,c)},_switchView:function(a,
b,c,d,f,t){a&&e.css(a,"display","none");e.css(b,"display","block");this._fireOnSwitch(c,f);t&&t.call(this)},_fireOnSwitch:function(a,b){this.fire("switch",i.mix(b||{},{currentIndex:a}))},prev:function(a){var b=this.activeIndex;this.switchTo(b>0?b-1:this.length-1,"backward",a)},next:function(a){var b=this.activeIndex;this.switchTo(b<this.length-1?b+1:0,"forward",a)},destroy:function(){for(var a=this,b=a.constructor;b;){i.each(b.Plugins,function(c){c.destroy&&c.destroy(a)});b=b.superclass?b.superclass.constructor:
null}e.remove(a.container);a.nav=null;a.content=null;a.container=null;a.triggers=[];a.panels=[];a.detach()}});return p},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(i,e,s,r,p){function w(k){var m=k.currentIndex,v=this.activeIndex,z=this.panels,E=z[m*this.config.steps],h=this.triggers;m=h[m];if((k=!!(k.originalEvent.target||k.originalEvent.srcElement))||v==-1){i.each(h,function(j){o(j,-1)});i.each(z,function(j){o(j,-1)});m&&o(m,0);o(E,0);k&&E.focus()}}function u(k){var m=null;i.each(this.triggers,function(v){if(v==k||e.contains(v,k)){m=v;return false}});return m}function g(k){var m=k.target;switch(k.keyCode){case t:case f:if(m=
u.call(this,m)){m=m;var v=e.next(m),z=this.triggers;v||(v=z[0]);o(m,-1);if(v){o(v,0);v.focus()}k.halt()}break;case d:case c:if(m=u.call(this,m)){m=m;v=e.prev(m);z=this.triggers;v||(v=z[z.length-1]);o(m,-1);if(v){o(v,0);v.focus()}k.halt()}break;case n:case y:if(m=u.call(this,m)){this.switchTo(i.indexOf(m,this.triggers),undefined,x);k.halt()}}}function q(k){var m=null;i.each(this.panels,function(v){if(v==k||e.contains(v,k)){m=v;return false}});return m}function a(k,m){var v=i.indexOf(k,this.panels),
z=this.config.steps,E=Math.floor(v/z);if(E==this.activeIndex)return 1;if(v%z==0||v%z==z-1){this.switchTo(E,m,x);return 0}return 1}function b(k){var m=k.target;switch(k.keyCode){case t:case f:if(m=q.call(this,m)){m=m;var v=e.next(m),z=this.panels;v||(v=z[0]);o(m,-1);o(v,0);a.call(this,v,l)&&v.focus();k.halt()}break;case d:case c:if(m=q.call(this,m)){m=m;v=e.prev(m);z=this.panels;v||(v=z[z.length-1]);o(m,-1);o(v,0);a.call(this,v,B)&&v.focus();k.halt()}break;case n:case y:if(m=q.call(this,m)){this.fire("itemSelected",
{item:m});k.halt()}}}var c=37,d=38,f=39,t=40,y=32,n=13,o=r.setTabIndex,x={originalEvent:{target:1}},l="forward",B="backward";i.mix(p.Config,{aria:false});p.Plugins.push({name:"aria",init:function(k){if(k.config.aria){var m=k.triggers,v=k.panels,z=k.content,E=k.activeIndex;if(!z.id)z.id=i.guid("ks-switchbale-content");z.setAttribute("role","listbox");var h=0;i.each(m,function(j){o(j,E==h?"0":"-1");j.setAttribute("role","button");j.setAttribute("aria-controls",z.id);h++});h=0;i.each(v,function(j){o(j,
"-1");j.setAttribute("role","option");h++});k.on("switch",w,k);(m=k.nav)&&s.on(m,"keydown",g,k);s.on(z,"keydown",b,k);m=k.prevBtn;v=k.nextBtn;if(m){o(m,0);m.setAttribute("role","button");s.on(m,"keydown",function(j){if(j.keyCode==n||j.keyCode==y){k.prev(x);j.preventDefault()}})}if(v){o(v,0);v.setAttribute("role","button");s.on(v,"keydown",function(j){if(j.keyCode==n||j.keyCode==y){k.next(x);j.preventDefault()}})}}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/carousel/base",function(i,e,s,r){function p(q,a){if(!(this instanceof p))return new p(q,a);p.superclass.constructor.apply(this,arguments)}var w="prevBtn",u="nextBtn",g={originalEvent:{target:1}};p.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};p.Plugins=[];i.extend(p,r,{_init:function(){function q(d){e.removeClass([a[w],a[u]],c);d==0&&e.addClass(a[w],c);d==a.length-1&&e.addClass(a[u],c)}
var a=this;p.superclass._init.call(a);var b=a.config,c=b.disableBtnCls;i.each(["prev","next"],function(d){var f=a[d+"Btn"]=e.get("."+b[d+"BtnCls"],a.container);s.on(f,"mousedown",function(t){t.preventDefault();t=a.activeIndex;if(d=="prev"&&(t!=0||b.circular))a[d](g);if(d=="next"&&(t!=a.length-1||b.circular))a[d](g)})});if(!b.circular){a.on("added removed",function(){q(a.activeIndex)});a.on("switch",function(d){q(d.currentIndex)})}s.delegate(a.content,"click",".ks-switchable-panel-internal",function(d){a.fire("itemSelected",
{item:d.currentTarget})})}});return p},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(i,e,s,r){function p(n,o,x,l,B){var k=this;o=k.config;var m=k.length,v=k.completedIndex,z=o.scrollType===y,E=z?a:b,h=k.viewSize[z?0:1];z=-h*l;var j={},A,D=B===t;if(A=D&&v===0&&l===m-1||B===f&&v===m-1&&l===0)z=w.call(k,k.panels,l,D,E,h);j[E]=z+d;k.anim&&k.anim.stop();if(n)k.anim=(new s(k.content,j,o.duration,o.easing,function(){A&&u.call(k,k.panels,l,D,E,h);k.anim=undefined;x&&x()})).run();else{e.css(k.content,j);x&&x()}}function w(n,o,x,l,B){var k=this.config.steps;
o=this.length;var m=x?o-1:0;n=n.slice(m*k,(m+1)*k);e.css(n,g,q);e.css(n,l,(x?-1:1)*B*o);return x?B:-B*o}function u(n,o,x,l,B){var k=this.config.steps;o=this.length;var m=x?o-1:0;n=n.slice(m*k,(m+1)*k);e.css(n,g,c);e.css(n,l,c);e.css(this.content,l,x?-B*(o-1):c)}var g="position",q="relative",a="left",b="top",c="",d="px",f="forward",t="backward",y="scrollx";i.mix(r.Config,{circular:false});r.Plugins.push({name:"circular",init:function(n){n=n.config;if(n.circular&&(n.effect===y||n.effect==="scrolly")){n.scrollType=
n.effect;n.effect=p}}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/countdown",function(i,e,s,r,p,w){i.mix(p.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});p.Plugins.push({name:"countdown",init:function(u){function g(n){q();y=(new r(d[n],t,c-1)).run()}function q(){if(b){clearTimeout(b);b=null}if(y){y.stop();y=w}}var a=u.config,b,c=a.interval,d=[],f=a.countdownFromStyle,t=a.countdownToStyle,y;if(!(!a.autoplay||!a.hasTriggers||!a.countdown)){i.each(u.triggers,function(n,o){n.innerHTML='<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+
n.innerHTML+"</div>";d[o]=n.firstChild});if(a.pauseOnHover){s.on(u.container,"mouseenter",function(){q();var n=d[u.activeIndex];if(f)y=(new r(n,f,0.2,"easeOut")).run();else e.attr(n,"style","")});s.on(u.container,"mouseleave",function(){q();var n=u.activeIndex;e.attr(d[n],"style",f);b=setTimeout(function(){g(n)},200)})}u.on("beforeSwitch",function(){q();if(d[u.activeIndex])e.attr(d[u.activeIndex],"style",f||"")});u.on("switch",function(n){u.paused||g(n.currentIndex)});u.activeIndex>-1&&g(u.activeIndex)}}});
return p},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/effect",function(i,e,s,r,p,w){var u;i.mix(p.Config,{effect:"none",duration:0.5,easing:"easeNone"});p.Effects={none:function(g,q,a){g&&e.css(g,"display","none");e.css(q,"display","block");a&&a()},fade:function(g,q,a){var b=this,c=b.config,d=g?g[0]:null,f=q[0];if(b.anim){b.anim.stop();e.css(b.anim.fromEl,{zIndex:1,opacity:0});e.css(b.anim.toEl,"zIndex",9)}e.css(f,"opacity",1);if(d){b.anim=(new r(d,{opacity:0},c.duration,c.easing,function(){b.anim=w;e.css(f,"z-index",9);e.css(d,
"z-index",1);a&&a()})).run();b.anim.toEl=f;b.anim.fromEl=d}else{e.css(f,"z-index",9);a&&a()}},scroll:function(g,q,a,b){var c=this;q=c.config;var d=q.effect==="scrollx",f={};f[d?"left":"top"]=-(c.viewSize[d?0:1]*b)+"px";c.anim&&c.anim.stop();if(g)c.anim=(new r(c.content,f,q.duration,q.easing,function(){c.anim=w;a&&a()})).run();else{e.css(c.content,f);a&&a()}}};u=p.Effects;u.scrollx=u.scrolly=u.scroll;p.Plugins.push({name:"effect",init:function(g){var q=g.config,a=q.effect,b=g.panels,c=g.content,d=
q.steps,f=g.activeIndex;g.viewSize=[q.viewSize[0]||b[0].offsetWidth*d,q.viewSize[1]||b[0].offsetHeight*d];if(a!=="none"){e.css(b,"display","block");switch(a){case "scrollx":case "scrolly":e.css(c,"position","absolute");e.css(c.parentNode,"position")=="static"&&e.css(c.parentNode,"position","relative");if(a==="scrollx"){e.css(b,"float","left");e.width(c,"9999px")}break;case "fade":var t=f*d,y=t+d-1,n;i.each(b,function(o,x){n=x>=t&&x<=y;e.css(o,{opacity:n?1:0,position:"absolute",zIndex:n?9:1})})}}}});
i.augment(p,{_switchView:function(g,q,a,b,c,d){var f=this,t=f.config.effect;(i.isFunction(t)?t:u[t]).call(f,g,q,function(){f._fireOnSwitch(a,c);d&&d.call(f)},a,b)}});return p},{requires:["dom","event","anim","switchable/base"]});
KISSY.add("switchable/lazyload",function(i,e,s){var r="beforeSwitch",p="img",w="textarea",u={};u[p]="lazyImgAttribute";u[w]="lazyTextareaClass";i.mix(s.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:w});s.Plugins.push({name:"lazyload",init:function(g){function q(f){var t=b.steps;f=f.toIndex*t;a.loadCustomLazyData(g.panels.slice(f,f+t),c,d);a:{var y,n,o;if(f=(t=c===p)?"img":c===w?"textarea":""){f=e.query(f,g.container);y=0;for(o=f.length;y<
o;y++){n=f[y];if(t?e.attr(n,d):e.hasClass(n,d)){t=false;break a}}}t=true}t&&g.detach(r,q)}var a=i.require("datalazyload"),b=g.config,c,d;if(b.lazyDataType==="img-src")b.lazyDataType=p;if(b.lazyDataType==="area-data")b.lazyDataType=w;c=b.lazyDataType;d=b[u[c]];!a||!c||!d||g.on(r,q)}});return s},{requires:["dom","./base"]});
KISSY.add("switchable/slide/aria",function(i,e,s,r,p){function w(d){switch(d.keyCode){case a:case q:this.next(b);d.halt();break;case g:case u:this.prev(b);d.halt()}}var u=37,g=38,q=39,a=40;i.mix(p.Config,{aria:false});var b={originalEvent:{target:1}},c=r.setTabIndex;p.Plugins.push({name:"aria",init:function(d){if(d.config.aria){var f=d.panels,t=0,y=d.activeIndex;i.each(d.triggers,function(o){c(o,"-1");t++});t=0;i.each(f,function(o){c(o,y==t?"0":"-1");e.attr(o,"role","option");t++});var n=d.content;
e.attr(n,"role","listbox");s.on(n,"keydown",w,d);c(f[0],0);d.on("switch",function(o){var x=o.currentIndex;o=!!(o.originalEvent.target||o.originalEvent.srcElement);var l=d.completedIndex;l>-1&&c(f[l],-1);c(f[x],0);o&&f[x].focus()})}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/slide/base",function(i,e){function s(r,p){if(!(this instanceof s))return new s(r,p);s.superclass.constructor.apply(this,arguments)}s.Config={autoplay:true,circular:true};s.Plugins=[];i.extend(s,e);return s},{requires:["../base"]});
KISSY.add("switchable",function(i,e,s,r,p,w,u,g,q,a,b,c,d,f,t,y){i.mix(e,{Accordion:r,Carousel:g,Slide:f,Tabs:y});return e},{requires:["switchable/base","switchable/aria","switchable/accordion/base","switchable/accordion/aria","switchable/autoplay","switchable/autorender","switchable/carousel/base","switchable/carousel/aria","switchable/circular","switchable/countdown","switchable/effect","switchable/lazyload","switchable/slide/base","switchable/slide/aria","switchable/tabs/base","switchable/tabs/aria"]});
KISSY.add("switchable/tabs/aria",function(i,e,s,r,p,w){function u(l){var B=null;i.each(this.triggers,function(k){if(k==l||e.contains(k,l))B=k});return B}function g(l){switch(l.keyCode){case b:case c:l.ctrlKey&&!l.altKey&&!l.shiftKey&&l.halt();break;case n:l.ctrlKey&&!l.altKey&&l.halt()}}function q(l){var B=l.target,k=l.ctrlKey&&!l.shiftKey&&!l.altKey;switch(l.keyCode){case d:case f:if(u.call(this,B)){this.prev(x(l));l.halt()}break;case t:case y:if(u.call(this,B)){this.next(x(l));l.halt()}break;case c:if(k){l.halt();
this.next(x(l))}break;case b:if(k){l.halt();this.prev(x(l))}break;case n:if(l.ctrlKey&&!l.altKey){l.halt();l.shiftKey?this.prev(x(l)):this.next(x(l))}}}function a(l){var B=!!(l.originalEvent.target||l.originalEvent.srcElement),k=this.completedIndex,m=l.currentIndex;if(k!=m){l=this.triggers[k];var v=this.triggers[m];k=this.panels[k];m=this.panels[m];l&&o(l,"-1");o(v,"0");B&&v.focus();k&&k.setAttribute("aria-hidden","true");m.setAttribute("aria-hidden","false")}}var b=33,c=34,d=37,f=38,t=39,y=40,n=
9;i.mix(w.Config,{aria:true});w.Plugins.push({name:"aria",init:function(l){function B(j){j.setAttribute("role","tab");o(j,"-1");if(!j.id)j.id=i.guid("ks-switchable")}function k(j,A){j.setAttribute("role","tabpanel");j.setAttribute("aria-hidden","true");j.setAttribute("aria-labelledby",A.id)}if(l.config.aria){var m=l.triggers,v=l.activeIndex,z=l.panels,E=l.container;l.nav&&e.attr(l.nav,"role","tablist");var h=0;i.each(m,B);l.on("added",function(j){var A;B(A=j.trigger);k(j.panel,A)});h=0;i.each(z,function(j){k(j,
m[h]);h++});if(v>-1){o(m[v],"0");z[v].setAttribute("aria-hidden","false")}l.on("switch",a,l);s.on(E,"keydown",q,l);s.on(E,"keypress",g,l)}}});var o=p.setTabIndex,x=r.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(i,e){function s(r,p){if(!(this instanceof s))return new s(r,p);s.superclass.constructor.call(this,r,p);return 0}i.extend(s,e);s.Config={};s.Plugins=[];return s},{requires:["../base"]});
