var LocalStorage={version:"1.0.0",client:null,moviePath:"http://static.guang.com/js/ui/localstorage.swf",setMoviePath:function(a){this.moviePath=a},dispatch:function(){this.client&&this.client.loadSwfReady()},Client:function(a){a&&(this.callback=a),this.handlers={},this.movieId="LocalStorageMovie_"+this.id,LocalStorage.client=this,this.insertMovie()}};LocalStorage.Client.prototype={id:"guang",ready:!1,movie:null,callback:function(){},insertMovie:function(){this.div=document.createElement("div");var a=this.div.style;a.position="absolute",a.height="0",a.width="0";var b=document.getElementsByTagName("body")[0];b.appendChild(this.div),this.div.innerHTML=this.getHTML()},getHTML:function(){var a="",b="id="+this.id;if(navigator.userAgent.match(/MSIE/)){var c=location.href.match(/^https/i)?"https://":"http://";a+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+c+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="1" height="1" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+LocalStorage.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+b+'"/><param name="wmode" value="transparent"/></object>'}else a+='<embed id="'+this.movieId+'" src="'+LocalStorage.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="1" height="1" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+b+'" wmode="transparent" />';return a},setStorage:function(a,b){this.ready&&this.movie.set(a,b)},getStorage:function(a){if(this.ready)return this.movie.get(a)},removeStorage:function(a){this.ready&&this.movie.remove(a)},loadSwfReady:function(){this.movie=document.getElementById(this.movieId);if(!this.movie){var a=this;setTimeout(function(){a.loadSwfReady()},100);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var a=this;setTimeout(function(){a.loadSwfReady()},100),this.ready=!0;return}this.ready=!0,this.callback(this)}}